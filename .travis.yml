language: scala
sudo: required

before_install:
  - sudo apt -qq update
  - sudo apt install -y sshpass
  - travis_wait 60 ./scripts/install-deps.sh
  - export RISCV=$HOME/riscv-tools

script:
  - make verilog
  - make test-all

after_success:
  - mkdir artifacts
  - mv logs/ test_run_dir/ verilog/ artifacts/
  - export ARTIFACT_NAME=$(date +%d-%m-%Y--%H-%M-%S)
  - tar -czf $ARTIFACT_NAME.tgz artifacts
  - export SSHPASS=$DEPLOY_PASS1
  - sshpass -e scp $ARTIFACT_NAME.tgz -p $DEPLOY_PORT1 $DEPLOY_USER1@$DEPLOY_HOST:$DEPLOY_PATH1
  - export SSHPASS=$DEPLOY_PASS2
  - sshpass -e scp $ARTIFACT_NAME.tgz -p $DEPLOY_PORT2 $DEPLOY_USER2@$DEPLOY_HOST:$DEPLOY_PATH2

notifications:
  email:
    recipients:
    - lfiolhais@iobundle.com
    - rgoncalves@iobundle.com
    - jsousa@iobundle.com
    on_success: never
    on_failure: always

env:
  global:
  - secure: bg2stY52X51TVSfEUlWKp0/ybmN33RKqdQs7B3bCR6tbNlTjVzsyPyEv11RH9WVH+lsQ2ZtcFdxQV3SppDxuDjkM9YF7eAXHZeZjnL6wkDpn3LQZxh7peiF7HQuXxnk+sxXElq/er7yTbb3jGLZrHcAsnDuIB1Yy8+kY1M7vkt2WEHVp3sArYcP5OLMaWxMK9cd0zuoV2kUtxXSTvl7T671ZhEl7AP9Qp5As4hWuIoW/nwCLTwHX55BE4KrMYQDxdH6CZkIHpEevWXOY/x/iwHsmftvC9ftDVaNPAxdODq0075LeGJaynjEUI8nuSZ00EygIjaVQFV0wlMqv3A6QAVpG6tZw4T5kT41sFnZWLNKthN7sTMk6liF8xdLttUpP+VgeASb/Xg2PaJdwwYV7RY3/hb9JBQart/ZAvVC5zdQNlA1GXRbQ3Wk6qEm1bEsCGukjN2QfuPkBcwriBBYxY1ybxlznPK4+CzZqYIkrC0Gkcdx33xCDlKfRAEjd0Bjvfna7rslur5OK/pNOPEgxb5djrMW5QyKYrYnZt3I+XegRRpUkSaDbLaPF/Gno+FdVPJI+0mI8c7NC30mssGCti76fV8blR1j/Xkm25pviYqzG9Kw3+d7uCq47ED1julS9MmWU8Ou1yqsdQJt1QJ+2TflE9f4Vc3VUITbRp59SBpk=
  - secure: KbJo4/RFfAphe5Tg7rtjhZWwmvXZDaA+q7t1lUkm4GSyfcyUOt9UBbbs9DxJZfcMpJArzUn1t0JSwLI0RixpKeZbnUTAvCRTcHAQ1Ke+NmVFoxmcMOWJhJBJp5kJlb2Uoxbssf1WHT8zK26jL7+gHQg3WP7yepiZriSJyAbC88hasJ2UHgAg/ad4ylDGJ7jTv0xZFFRZpmoI1KdbjB2SHCidtbyAIBBgaoU5n99Lyi25STLvMkb7tDkL0vVE5CHY4LNa2G6l0BiuLhg2vIzBqaqZ8jg5I4a0KjIwTRApt8GCxKL8FzKj4udRdwiUtVa//cZmp9dp+kxCNtkTr20cvprYqPLdEcBSMkgkxxfmdmSposFq99tvmWUwB2Hew1D+8WcceOLKvnzZIChGbgH5kBd2o8xLFZe7Qc+KPe8DEmV7U5NeMuYkbVTCuljIj5g5lBSCaulSGcDFgxfCQzKBYfVUdTGuibtuNZRSJ/WHun7NCgY1M/HuYXSf0KZvutB772Cc0BO7I9c+uEW16QMNnqkTnPeXutF0BwwPIodidarMKD5q1lowBRb4wDBuJMI34mrdCyK1TuKqDQ4WZq7vWHqcrwKpwxY8LT8r01NbS4Ug0a9JfYdroPVhOxrlxLhFd/24jXwRwtFR+BhKfA9xHDaeTve3sTsf26WbyVDCG30=
  - secure: DOdQ+XtCNTWc+Dp9bJMcUNLrNAcPSNgD54xjoHJ1GJGgz6vQIx2qlgkHnl2THstcVnq7niT5y7BqvOH5m5fgKES12N36pR03r9nWFEmYpggUc7Scnuig6n/OrWf3MdX8UB9A33YrnIdG/9dJQsviKTSqN1b8V9XH4qJUQDYNY12bcUhNEfdbi1yaGMSO/SfqbeFqNT1g7ioyG26wpl9VcxCURQVI1AAG2bGK23Dr4PdnLqXji6BvKpftSv4S6Yw83+QF6bWqzsK8MOK+ySQHgdMR373NotYHowHceimogIc1gmRH4ITIsDlUDr9LW1UFREsBTv6F1QUR7FY6g4qtc4o5tM0iyPJCAwIicc0wQg+sBdRsWVjcmsG0MW+RehF8+e6PmoRMg0Dt9netPWt6iRUfPeGwbq6Ua4rBwAu0wS0xZhQQQkeAGT3fxjCOBlr6CHHXukOypoGnUXUnUDKpmHxyI47e2NBHpGnJ+45Cr1yf8pQGWL7nP4Mn7dRrpov1wTWcv6UODM5F2p4ne46z0gyEPC8G/iCZ76bYZupGtcviaSg0ioresFCgaX4HITP1d9hG5E5NgKtdDow3tvautVpEct9KmqEAaPa6snrokRz71moZbzUQsrFteZ7rjJWIqf2+hywHtLi6rK1cKyLYJbtGtwqgsa0J5hkn5rCHISc=
  - secure: CbYjTZ9uBGdG9yprnHlnYS/KBqNuGw/bLp5iT+rypSs+pbW1fkCxFsBWII5BP/+VbEBMIIuI6z89tr8qo45R2gXhJuKqa55QXUcdJb9ziasOgosfkOdRFXYYVmFjjLn4rvySsqbPNOukN2AjYbFY0fbnRuCldD4jdtz8hC6pEkE8PDi/4//OH41BQfWosS+Lj0smkyAU0EDB2GpxLLQXbYh/fYORFjrnOhKdMicN8MkrHtK+kmQ/Yh2VAGHe6xHzj6zm0//Co//XgXf8rIupyFNnyAA6ckMk+lEscOy2zGnoeRn+xQGo82dIhbz3hK7FWsSJReOosbWEgBWTUk/mLDTsNiV6KwVEu5kC0r/TvH7rvqkzvxWJE+vJgY1zJSSiz6L+skQ08TH9a4T4GChEhmw7RImGXeFnejTP+w1kaygDkIJAjDZuBOu+Kh5NM/xZSVpMwWlD11rlAEil9mef5t+deeJ9HYeFmG4DaiUTEeTuGCzb+7evpW0dtUXTDrZHPFJzW3MeLRgdVtNCj2p5cON+Azlmh5PipUiv8faY+WM5Yh7g6CQ9CEXtW3U6m28Ku4nlKTPWvSKDZ7xdLTiM5F6NvCHxs96Ge//yBvh73lN+kqq4fPpU06sCc3B7rA02TuZqw4XFwj3tumoF7YOUkRNOVE0HwCKyCA4TqTcXvgo=
  - secure: iap4uC1SMjIpVQu5hz51ddsK/yUkFgoby+ffA6zrcflWFUkq0B/JEeUrg9gJ7isrW4CE6GxPlFLqbDjm+rbhjznKANAHvNwpZkjQVFIcLo9s6JoE8K8oU+bT0fCs72njR0FynUqTVYnD5YhuK+yNE998TgL6zgSeVySmVs+5QO44O0ZHrsfgURIaJ+uQrYbx36hchWOM5Mf1buEnRo6CgbGAnNHI+rvQweuvZ7Jvz5oNGxfQ382OtOXSo2gYLiQW/drqeL/albCyJ8v+pS2Ls6C84li7Mq3qGd6dJCs6o6mcH6Df3u9ImDpmg0LBqNLwz0V70TEnHCsa2gHklpBv4zQECuSP8ofLsQro9gSHFAEoj4hRUm1H4LlQWkLn8tDYwwQpoDE+dPxhz6gs8iXeDCPDhGKcBzDvovAUoqLYXXPc8VwI6Mw6sstgqfPx85k+OS4ta+QNByj+oBgvCcFwc34Vk4hSwHW9850IcTZHBk+tfle1OsK00a34FDxhoyAn5CVlcaRtsIjN5XmMOSN+v2phn+qaa3f9MY9ig1DA0qVesIEhiyrkjS/H86cAeZa4TMq9uiMcav8ejotpRTzlAO4oUY55JYmT+tu0EWTNnQ6qGOM3hTveplXSoGNBMQJ2o1bGkD2aGFEhgrjB5NnkpL5rQAoXNMxQyRX5nNPFPkw=
  - secure: bD6lODCIW1JR6xq3ypeXEvGeNEiCEln98V+Kz6W7j/u3ldJJ1LuIEXUgQG3A5JTichSsZ61ZAZOVz30KektTaUdmn7gDBYtu+a2aodg2hDJaHzFERlYlkBp4GtZjjB8kzkk4u7iywRgkhkdRlTE4pPb5zeEzbxrobJj5tFab5KvvVnrSp0+k0ojSWIuxGOD24d4WBkhZUAiWT2o7FDdFF9nB1GsW3ux3SyqbDbzogFMvv2epGI6gHL0QPXVpNZbTnBzpYrD3u/2aqiMGyLLnAlkIcvCjJULE25VSeZRTY/LlDPvaZFFqnktjaESar6ZPCGt+Sa5R60svStrgut2fDDW/bkchJvZ2JxiuUihzeSh4Hy/XpYt0evKURKdmsTnBmm/Mll9g7v0ZuCDzf7Dpeuq7yjA42i9z/yzniQZhZWFZ2ZAXYCeaVG2NARNYCzowl8/b1jYmL4ptKCNYisIRkdQ47TuFW08Xmu6djG7EEhw9ljyqlFGoiE49ZG7CuAwCc5IZsQER4VSRBZyeIqQiMhkzCfldhVecSJm0VeTMB2l9iJ0KMdxb/j/4fr5ZKLpFomclAC7JLZ92ACF+RxHD7pg04j14lHjgHpMoLzKBunSLEsgAkzk7UpxyQYbE3PiTzfG9/PgsKKomLNI8mITZpR5J9fcGLwHMD5myBFgmHrc=
  - secure: NVDfW9hr04UMvab1mwIXoagey4/6Swbmmdw3dQpbhxdVEXYH4lJXvtqFZ22e9ELTQriXIE9+20UtRE1c09sneLqasrXpjmkshruPQDxHkmPRVW/PXIlEfcnL9gzoSafaccZai1ESK0LbuYzFMBrsotzkYhw/c4RSOezcy3FnrLLAzu5yGiFWDm/lowBY/eCnGNSnXxoo49bdR2Oi1YsLkk1udJkIkfW/wWucQ+OvGpLqZCPNe1DClJwMtYL5FrYdeTBntrXLvfFQf04ojH+3LuhugS/TREs7oYXaWnB8hUROfb7nu1l4u3anT3lR/gCUM1alUJG7CU6U2bmYQoBRKer7T0Ojkp7GeUFgtqgIYkIh1GFl8oJwVbRci+c76djn8mYUERCgNY6dd0IW/GzfCRuZ0LNjgGJ6Qxoh9wugLHWX9jc1g0HBJmtT5amD1TI1LcoSoTtZcprNRPnkOKwCn2i3g2GHwbPTAHc7XClP5gLkC+Ha3oq4nf+u1/ZpZqVvYGoah8iVLYFIUC2KKzwY9jIJIrZeLR6uoUipfTo7ZJzdskk51UdF2sZRqYA2WbOavPHfzgtTFhzYSO0K4gogDoapPUUyX+oD2ulkmfv8tAD5pJu3azA1RhPNc8xivNozzaxoMb1+AxoDTVVFcaHMmUUMvc+XRyIs0Ggohn3H9Y4=
  - secure: jrL28TTR8mNLZ4ynag8rPy2CXiE+gBGh0CA1sKG3iib+2eP8qulSgE1UK6pXecnqAtBcDSGBZqqktvwR4JrcUK1VZykOiQMqQxvtn/jzQ/9HixetfNeEbh2z4C/qJfYUcdOeiLzZPGfCzSQJeRiM/3gxB4d7HoDqjHSi3zYh7x4vfPiDBLON6ZB5Mx2gKaL2h9v8kaEptgWR9hNtCSRKru8DAvJdeZ/+TPBgX5DuWPWFD3jJUmMpYKEjlhbPkoTryxT1tmwEe6ivxSqUOIMK0XhlcZiKPUMKadk4bR+TGaGUKUj7YCtdjI01roxHM3L90PxdG0HKfhtRZXXY4JFITic7GclmvkP+g544nfxdzxX4/qTVJlp0kphrLww8T+O5RwVmQfJHU2PDmOlbWbatXOkqb+m2evbMpWojpFftrGis2E0+LO5vBSEKB+qQNu34p2uwsNz1hsJVUAEymUqrIuWJsLWVYWFMIilxQIdufqAJegMn2+Qhka+4uaIdd+iaMs4Kr6WxAVwRQ79vhqIPdEXkVURLaaAS40RPdK/0ti/K7XZsR1f3bfe173j6c8pYJChtKEjkgyM6nsBqDnN8Vorq87KL42sOjCzjzhYCUnZeK+aO0Mvi1pISkcbQjWrb2mWB1c34nmsNsxOnnhx9TFJ2O0IP7aqlhhi5OqH/GRk=
  - secure: jsOmmsRgXKwG99/c/Ei0x4QV3JmJBIVXundpFxERKeJ0GXBRypXllD9KhlItnsXzQqCVNp9F5w31LfeDgTos7KFRtdM1ufgOnhYX6o0w08XWBaAs37hofuRWVLcWyKZx6NdDkNPJtRess+mkk64qd6QCozplduEa35OqGnNlVdvpB3zahXihQVcOp7o0xh3HFKVMwT1m0zis7I9SE68F9+AqNwoEr9Qx15u9AsAt7K+viCaf7QEK+e7NcDVj8JuY5qEaH0rUsbWEhUCBBSDyVBT7ST713UFPAS11t8k0LkBT9XyQfpmL5DrbdHqpZ6e0iwmQgYVXJXoTNAiNhCw/wXczQInB57s19m/EzGIcSzYMrkzhiQLmg0alPCjaJG1DyXj9IOzoo2CqwZgnRqm0R+U/M+f5IVa3yIZD7LwMB4Lx2UxbgSxMQNBWzpXaE/Fzvr9esPgSE6coDCzjA1Kor0w0Nx1Q4Nbek8FM5tvwuBU82fLHH0SAZ5Ts/O3z3CIdRhA49KzciHjTKzyqlwWh3gFznGgef9KfPS/JlvsR4L4QrXOjTiys4VdXoqJC64EqDXb9hEd85kz8CygecUPLDXJ+WJ1QQepBWJ607uKBY+yy7z8rTMBvjGOVSute7ZGiK3mAA/P1Q6PWbrMiffsmdB3HPKaZf1v+0O4l3OjqPf8=
